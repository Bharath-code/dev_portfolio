---
/**
 * Currently Building Badge
 * Shows what you're actively working on
 */
const currentProject = {
    name: "KetoLens",
    description: "AI-powered nutrition scanner",
    status: "In Progress",
    link: "https://github.com/Bharath-code/ketolens",
};
---

<div id="currently-building" class="currently-building">
    <div class="badge-pulse"></div>
    <div class="badge-content">
        <div class="badge-header">
            <span class="badge-status">
                <span class="status-dot"></span>
                Currently Building
            </span>
        </div>
        <a
            href={currentProject.link}
            target="_blank"
            rel="noopener noreferrer"
            class="badge-link"
        >
            <span class="project-name">{currentProject.name}</span>
            <span class="project-desc">{currentProject.description}</span>
        </a>
    </div>
    <button id="close-building" class="badge-close" aria-label="Close">
        <svg
            class="w-3 h-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"></path>
        </svg>
    </button>
</div>

<style>
    .currently-building {
        position: fixed;
        bottom: 6rem;
        left: 1.5rem;
        z-index: 9996;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        background: linear-gradient(
            145deg,
            rgba(26, 26, 26, 0.95),
            rgba(13, 13, 13, 0.95)
        );
        border: 1px solid rgba(16, 185, 129, 0.3);
        border-radius: 0.75rem;
        backdrop-filter: blur(12px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        animation: slideIn 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        animation-delay: 2s;
        opacity: 0;
    }

    .currently-building.hidden {
        animation: slideOut 0.3s ease forwards;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateX(-20px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes slideOut {
        to {
            opacity: 0;
            transform: translateX(-20px);
        }
    }

    .badge-pulse {
        position: absolute;
        inset: -2px;
        border-radius: 0.875rem;
        background: linear-gradient(45deg, #10b981, #059669);
        opacity: 0;
        z-index: -1;
        animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
        0%,
        100% {
            opacity: 0;
            transform: scale(1);
        }
        50% {
            opacity: 0.1;
            transform: scale(1.02);
        }
    }

    .badge-content {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }

    .badge-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .badge-status {
        display: flex;
        align-items: center;
        gap: 0.375rem;
        font-size: 0.625rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: #10b981;
    }

    .status-dot {
        width: 6px;
        height: 6px;
        background: #10b981;
        border-radius: 50%;
        animation: blink 1.5s ease-in-out infinite;
    }

    @keyframes blink {
        0%,
        100% {
            opacity: 1;
        }
        50% {
            opacity: 0.3;
        }
    }

    .badge-link {
        display: flex;
        flex-direction: column;
        transition: transform 0.2s ease;
    }

    .badge-link:hover {
        transform: translateX(2px);
    }

    .project-name {
        font-family: "Archivo Black", sans-serif;
        font-size: 0.875rem;
        color: white;
    }

    .project-desc {
        font-size: 0.75rem;
        color: #888;
    }

    .badge-close {
        padding: 0.25rem;
        color: #666;
        transition: color 0.2s;
    }

    .badge-close:hover {
        color: white;
    }

    @media (max-width: 640px) {
        .currently-building {
            left: 1rem;
            right: 1rem;
            bottom: 5rem;
        }
    }
</style>

<script>
    function initCurrentlyBuilding() {
        const badge = document.getElementById("currently-building");
        const closeBtn = document.getElementById("close-building");

        if (!badge || !closeBtn) return;

        // Check if user dismissed it this session
        if (sessionStorage.getItem("building-dismissed")) {
            badge.style.display = "none";
            return;
        }

        closeBtn.addEventListener("click", () => {
            badge.classList.add("hidden");
            sessionStorage.setItem("building-dismissed", "true");
            setTimeout(() => {
                badge.style.display = "none";
            }, 300);
        });
    }

    initCurrentlyBuilding();
    document.addEventListener("astro:page-load", initCurrentlyBuilding);
</script>
