---
import Heading from "./Heading.astro";
import { siteContent } from "@/content/site-content";
---

<section
    class="relative flex min-h-[90vh] flex-col justify-center pt-20 overflow-hidden"
>
    <div class="relative z-10 mx-auto max-w-[1400px] w-full px-4 md:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <div>
                <!-- Availability Badge -->
                <div class="mb-6 opacity-0 hero-meta">
                    <div
                        class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-signal-emerald/10 border border-signal-emerald/20"
                    >
                        <span class="relative flex h-2 w-2">
                            <span
                                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-signal-emerald opacity-75"
                            ></span>
                            <span
                                class="relative inline-flex rounded-full h-2 w-2 bg-signal-emerald"
                            ></span>
                        </span>
                        <span
                            class="text-xs font-black tracking-widest uppercase text-signal-emerald"
                            >Open to New Opportunities</span
                        >
                    </div>
                </div>

                <div class="overflow-hidden">
                    <Heading
                        as="h1"
                        variant="display"
                        class="hero-text translate-y-[110%] opacity-0 leading-[0.9]"
                    >
                        {siteContent.hero.title.split(" ")[0]}<br />
                        <span class="text-signal-emerald"
                            >{
                                siteContent.hero.title
                                    .split(" ")
                                    .slice(1)
                                    .join(" ")
                            }</span
                        >
                    </Heading>
                </div>

                <div
                    class="mt-6 flex max-w-2xl flex-col gap-4 opacity-0 hero-meta"
                >
                    <p
                        class="text-lg md:text-xl leading-relaxed text-gray-600 dark:text-gray-400"
                    >
                        {siteContent.hero.bio}
                    </p>

                    <div class="flex flex-wrap gap-4">
                        <a
                            href="#work"
                            class="group relative inline-flex items-center gap-2 overflow-hidden rounded-full bg-black dark:bg-white px-6 py-3 text-white dark:text-black transition-all duration-300 hover:scale-105 active:scale-95 shadow-lg shadow-black/5 dark:shadow-white/5"
                        >
                            <span class="relative z-10 font-medium"
                                >View Work</span
                            >
                            <div
                                class="absolute inset-0 -z-0 translate-y-[100%] bg-signal-emerald transition-transform duration-300 group-hover:translate-y-0"
                            >
                            </div>
                        </a>
                        <a
                            href="https://linkedin.com/in/bharathkumar-palanisamy"
                            target="_blank"
                            class="group inline-flex items-center gap-2 rounded-full border border-black/10 dark:border-white/20 px-6 py-3 transition-all duration-300 hover:scale-105 active:scale-95 hover:bg-black/5 dark:hover:bg-white/5 text-black dark:text-white"
                        >
                            <span class="font-medium">View LinkedIn</span>
                        </a>
                    </div>
                </div>
            </div>

            <div
                class="hidden lg:flex relative h-full min-h-[400px] items-center justify-center"
            >
                <!-- Animated geometric visual -->
                <div class="hero-visual relative w-80 h-80">
                    <!-- Outer rotating ring -->
                    <div
                        class="absolute inset-0 rounded-full border-2 border-signal-emerald/30 animate-[spin_20s_linear_infinite]"
                    >
                    </div>
                    <!-- Middle pulsing ring -->
                    <div
                        class="absolute inset-4 rounded-full border border-signal-emerald/20 animate-pulse"
                    >
                    </div>
                    <!-- Inner static ring -->
                    <div
                        class="absolute inset-8 rounded-full border border-signal-emerald/40"
                    >
                    </div>
                    <!-- Center dot cluster -->
                    <div
                        class="absolute inset-0 flex items-center justify-center"
                    >
                        <div class="relative">
                            <div
                                class="w-4 h-4 rounded-full bg-signal-emerald animate-ping absolute"
                            >
                            </div>
                            <div
                                class="w-4 h-4 rounded-full bg-signal-emerald relative"
                            >
                            </div>
                        </div>
                    </div>
                    <!-- Orbiting dots -->
                    <div
                        class="absolute inset-0 animate-[spin_8s_linear_infinite]"
                    >
                        <div
                            class="absolute top-0 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full bg-signal-emerald/60"
                        >
                        </div>
                    </div>
                    <div
                        class="absolute inset-0 animate-[spin_12s_linear_infinite_reverse]"
                    >
                        <div
                            class="absolute bottom-0 left-1/2 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-signal-emerald/40"
                        >
                        </div>
                    </div>
                    <!-- Corner accents -->
                    <div
                        class="absolute -top-4 -right-4 w-8 h-8 border-t-2 border-r-2 border-signal-emerald/30 rounded-tr-lg"
                    >
                    </div>
                    <div
                        class="absolute -bottom-4 -left-4 w-8 h-8 border-b-2 border-l-2 border-signal-emerald/30 rounded-bl-lg"
                    >
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div
        class="absolute right-0 top-1/2 -z-10 h-[600px] w-[600px] -translate-y-1/2 translate-x-1/3 rounded-full bg-signal-emerald opacity-[0.03] blur-[120px]"
    >
    </div>
</section>

<script>
    import { gsap } from "gsap";

    function animateHero() {
        if (!document.querySelector(".hero-text")) return;

        const tl = gsap.timeline({ defaults: { ease: "power4.out" } });

        tl.to(".hero-text", {
            y: 0,
            opacity: 1,
            duration: 1.5,
            stagger: 0.1,
            delay: 0.2,
        }).to(
            ".hero-meta",
            {
                opacity: 1,
                y: 0,
                duration: 1,
            },
            "-=1",
        );
    }

    // Run on initial load
    animateHero();

    // Run on view transition navigation
    document.addEventListener("astro:page-load", () => {
        // We need to ensure elements are reset if they persisted (though they are usually replaced)
        // If they are new elements, they start with the CSS class state opacity-0
        animateHero();
    });
</script>
